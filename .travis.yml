  sudo : true

  notifications:
    email: false

  language: fortran

  os:
    - osx
    - linux

  compiler:
    - gcc

  addons:
    apt:
      packages:
        - gfortran
        - liblapack-dev
        - numdiff

  before_install:
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then export DYLD_LIBRARY_PATH=$PWD/cvode/lib:$PWD/openlibm-0.4.1 ; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update ; brew install gcc@4.8 homebrew/science/numdiff ; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then ./travis/install_cvode_osx.sh $PWD ; fi
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then ./travis/install_cvode_linux.sh $PWD ; fi
    - ./tools/install/install_openlibm.sh $PWD

  install:
    - ./tools/build.sh ./mcm_subset.fac

  script:
    - ./atchem
    - make test
