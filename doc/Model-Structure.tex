\section{Model Structure} \label{sec:structure}

AtChem2 is organized in several directories containing the source code,
the compilation files, the chemical mechanism, the model configuration
and output files, a number of scripts to install and compile the model,
plotting tools in various programming languages, and the test suite
files.

The directory structure has changed with the release of \textbf{version
1.1} (November 2018). The following table shows the new structure and,
for reference, the previous one.

\begin{longtable}[]{@{}lll@{}}
%\toprule
\begin{minipage}[b]{0.20\columnwidth}\raggedright
v1.0\strut
\end{minipage} & \begin{minipage}[b]{0.24\columnwidth}\raggedright
v1.1\strut
\end{minipage} & \begin{minipage}[b]{0.48\columnwidth}\raggedright
description\strut
\end{minipage}\tabularnewline
%\midrule
\endhead
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\emph{main directory}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\emph{main directory}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
information files (changelog, citation, license, readme) and auxiliary
files for the test suite (\emph{N.B.}: the \texttt{.gcda} and
\texttt{.gcno} files are generated by the Fortran compiler during the
build process).\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
--\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{mcm/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
data files related to specific versions of the MCM: lists of organic
peroxy radicals (RO2), parameters to calculate photolysis rates.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
--\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
model files: chemical mechanism (\texttt{.fac}), configuration, input,
output.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{modelConfiguration/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/configuration/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
model configuration files and mechanism shared library.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
--\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/constraints/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
model constraints.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{environmentConstraints/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/constraints/environment}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
constrained environment variables.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{environmentConstraints/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/constraints/photolysis}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
constrained photolysis rates.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{speciesConstraints/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/constraints/species}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
constrained chemical species.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{modelOutput/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/output/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
model output: chemical species, environment variables and photolysis
rates, diagnostic variables, formatted production and loss rates of
selected species.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{instantaneousRates/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{model/output/reactionRates}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
model output: reaction rates of every reaction in the chemical
mechanism.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{obj/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{obj/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
files generated by the Fortran compiler.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{src/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{src/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
Fortran source files.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
--\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{src/gen/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
Fortran source files generated by the compiler from the chemical
mechanism.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{tools/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{tools/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
Python and shell scripts to build and compile AtChem2, using the
chemical mechanism, the configuration and the constraints in the
\texttt{model/} directory.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{tools/install/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{tools/install/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
shell scripts to install the dependencies.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
--\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{tools/plot/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
scripts to plot the model results (gnuplot, Matlab/Octave, Python,
R).\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{travis/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{travis/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
shell scripts to run the test suite.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{travis/tests/}\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{travis/tests/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
behaviour tests.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
--\strut
\end{minipage} & \begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{travis/unit\_tests/}\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
unit tests.\strut
\end{minipage}\tabularnewline
%\bottomrule
\end{longtable}

The \texttt{model/} directory is the most important for the user: it
includes the chemical mechanism, the configuration files, the model
constraints and the model output. The \texttt{model/} directory can be
given any name and it can also be located outside of the \emph{AtChem2
main directory}.

There can be multiple \texttt{model/} directories (with different names)
in the same location. As long as the correct paths are passed to the
compilation and execution scripts, the model will compile and run. This
approach gives the user the flexibility to run different versions of the
same model or different models at the same time. For more information go
to: {[}{[}2. Model Setup and Execution{]}{]}.
